<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ninja AI Chat</title>

<!-- Ø®Ø·ÙˆØ· -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        font-family: 'Cairo', sans-serif;
        background: linear-gradient(135deg, #000000, #001100);
        color: #00ff9d;
        overflow-x: hidden;
    }

    h1 {
        text-align: center;
        padding: 20px;
        margin: 0;
        font-size: 36px;
        color: #00ff9d;
        text-shadow: 0 0 15px #00ff9d;
        animation: glow 2s infinite alternate;
    }

    @keyframes glow {
        from { text-shadow: 0 0 5px #00ff9d; }
        to { text-shadow: 0 0 25px #00ff9d; }
    }

    #chatBox {
        height: 50vh;
        overflow-y: auto;
        padding: 15px;
        border-top: 2px solid #00ff9d;
        border-bottom: 2px solid #00ff9d;
        margin: 10px;
        border-radius: 12px;
        background: #001100aa;
    }

    .msg {
        padding: 10px;
        margin: 10px 0;
        border-radius: 8px;
        max-width: 80%;
        line-height: 1.5;
        animation: fade 0.5s;
    }

    @keyframes fade {
        from {opacity: 0;}
        to {opacity: 1;}
    }

    .user {
        background: #00ff9d33;
        text-align: right;
        margin-left: auto;
        border: 1px solid #00ff9d;
    }

    .bot {
        background: #00330088;
        border: 1px solid #00ff9d;
    }

    #inputArea {
        display: flex;
        padding: 10px;
        background: #001100;
        border-top: 2px solid #00ff9d;
    }

    #userInput {
        flex: 1;
        padding: 12px;
        border: 2px solid #00ff9d;
        background: black;
        color: #00ff9d;
        border-radius: 8px;
        font-size: 16px;
    }

    #sendBtn {
        padding: 12px 20px;
        margin-left: 10px;
        background: #00ff9d;
        color: black;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        transition: 0.3s;
    }

    #sendBtn:hover {
        background: #00ffaa;
    }

    #fileInput {
        display: block;
        margin: 15px auto;
        padding: 10px;
        border: 2px solid #00ff9d;
        border-radius: 10px;
        background: black;
        color: #00ff9d;
        cursor: pointer;
    }

    img, video {
        max-width: 90%;
        max-height: 200px;
        margin: 10px;
        border-radius: 8px;
        border: 1px solid #00ff9d;
    }

    /* Ø´Ø®ØµÙŠØ© Ø§Ù„Ù†ÙŠÙ†Ø¬Ø§ */
    #ninjaCharacter {
        position: fixed;
        bottom: 10px;
        left: 10px;
        width: 100px;
        animation: ninjaMove 4s infinite alternate;
    }

    @keyframes ninjaMove {
        from {transform: translateX(0);}
        to {transform: translateX(20px);}
    }
</style>
</head>
<body>

<h1>âš¡ Ninja AI âš¡</h1>

<div id="chatBox"></div>

<div id="inputArea">
    <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
    <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<input type="file" id="fileInput" multiple accept="image/*,video/*,.pdf,.txt">
<div id="output"></div>

<img src="https://i.ibb.co/F0XqYrP/ninja.png" id="ninjaCharacter">

<script>
// Ø¶Ø¹ Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§
const API_KEY = "Ø¶Ø¹_Ø§Ù„Ù…ÙØªØ§Ø­_Ù‡Ù†Ø§";

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† localStorage
const chatBox = document.getElementById("chatBox");
const stored = localStorage.getItem("ninjaChat");
if(stored) chatBox.innerHTML = stored;

function addMessage(text, sender){
    const msg = document.createElement("div");
    msg.className = "msg " + sender;
    msg.textContent = text;
    chatBox.appendChild(msg);
    chatBox.scrollTop = 999999;

    // Ø­ÙØ¸ ÙƒÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
    localStorage.setItem("ninjaChat", chatBox.innerHTML);
}

document.getElementById("sendBtn").onclick = sendMessage;
document.getElementById("userInput").addEventListener("keypress", function(e){
    if(e.key === "Enter") sendMessage();
});

async function sendMessage(){
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if(text === "") return;

    addMessage(text, "user");
    input.value = "";
    addMessage("â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...", "bot");

    try{
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + API_KEY
            },
            body: JSON.stringify({
                model: "gpt-4o-mini",
                messages: [{role: "user", content: text}]
            })
        });

        const data = await response.json();
        document.querySelector(".bot:last-child").remove();
        const botReply = data.choices?.[0]?.message?.content || "â— Ø­Ø¯Ø« Ø®Ø·Ø£";
        addMessage(botReply, "bot");
    }catch(e){
        document.querySelector(".bot:last-child").remove();
        addMessage("â— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ", "bot");
    }
}

// Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
const fileInput = document.getElementById('fileInput');
const output = document.getElementById('output');

fileInput.addEventListener('change', function(event) {
    const files = event.target.files;
    output.innerHTML = '';
    for (let i=0;i<files.length;i++){
        const file = files[i];
        const fileType = file.type;
        if(fileType.startsWith('image/')){
            const img = document.createElement('img');
            img.src = URL.createObjectURL(file);
            output.appendChild(img);
        } else if(fileType.startsWith('video/')){
            const video = document.createElement('video');
            video.src = URL.createObjectURL(file);
            video.controls = true;
            output.appendChild(video);
        } else {
            const p = document.createElement('p');
            p.textContent = `ğŸ“„ ${file.name} (${fileType || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"})`;
            output.appendChild(p);
        }
    }
});
</script>

</body>
</html>
